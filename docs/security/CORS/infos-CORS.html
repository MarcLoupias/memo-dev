<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui"><meta name="robots" content="none"><title>marlou knowledge base</title><link href="../../github-markdown.css" rel="stylesheet" media="all"><link href="../../main.css" rel="stylesheet" media="all"><link href="../../github.css" rel="stylesheet"><script src="../../index.js"></script></head><body><article class="markdown-body"><h1 id="title-cors-cross-origin-resource-sharing">CORS (Cross-Origin Resource Sharing)</h1>
<h2 id="title-why-">Why ?</h2>
<ul>
<li>Because of <a href="http://en.wikipedia.org/wiki/Same_origin_polihtml">Same Origin Policy</a></li>
</ul>
<blockquote>
<p>The policy permits scripts running on pages originating from the same site – a combination of scheme, hostname, and port number – to access each other’s DOM with no specific restrictions, but prevents access to DOM on different sites.<br>Same-origin policy also applies to <code>XMLHttpRequest</code> and to <code>robots.txt</code>.</p>
</blockquote>
<p>CORS configuration is <strong>server-side</strong>.</p>
<p>A server using <code>&quot;Access-Control-Allow-Origin: *&quot;</code> allows all domains, it is <strong>very bad</strong>.</p>
<p><a href="http://stackoverflow.com/questions/12001269/what-are-the-security-risks-of-setting-access-control-allow-orightml">What are the security risks of setting Access-Control-Allow-Origin? : stackoverflow.com</a></p>
<blockquote>
<p>By responding with <code>Access-Control-Allow-Origin: *</code>, the requested resource allows sharing with every origin. This basically means that any site can send an XHR request to your site and access the server’s response which would not be the case if you hadn’t implemented this CORS response.</p>
</blockquote>
<blockquote>
<p>So any site can make a request to your site on behalf of their visitors and process its response. If you have something implemented like an authentication or authorization scheme that is based on something that is automatically provided by the browser (cookies, cookie-based sessions, etc.), the requests triggered by the third party sites will use them too.</p>
</blockquote>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharihtml">Cross Origin Ressource Sharing</a></li>
</ul>
<h2 id="title-infos">Infos</h2>
<ul>
<li><a href="http://www.developpez.net/forums/d755910/applications/sig-systeme-d-information-geographique/ign-api-geoportail/requete-cross-site-http-requesthtml">dev.com : requête: Cross-site HTTP requests</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_contrhtml">developer.mozilla.org : CORS</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Server-Side_Access_Contrhtml">developer.mozilla.org : Server-Side Access Control</a></li>
<li><a href="https://github.com/angular/angular.js/issues/50html">github.com/angular : issue 5009</a></li>
<li><a href="http://enable-cors.orhtml">enable-cors.org</a> <strong>Very usefull</strong></li>
<li><a href="http://haanto.com/cors-why-and-hohtml">cors-why-and-how</a></li>
<li><a href="http://blog.javascripting.com/2015/01/17/dont-hassle-with-corhtml">CORS &amp; proxy in javascript front project</a></li>
</ul>
<blockquote>
<p>When accessing a ressource from a website with a different domain/port, recent browsers refuse to interpret response because of CORS mechanism.<br>The server needs to put some headers to allow browsers to interpret responses.</p>
</blockquote>
<h2 id="title-http-headers">http headers</h2>
<ul>
<li><code>&quot;Access-Control-Allow-Origin: *&quot;</code> allow all domains</li>
<li><code>&quot;Access-Control-Allow-Origin: http://example.com:8080 http://foo.example.com&quot;</code> specify a defined domain list.</li>
<li>NOTE : Domain list is not allow, a single value is allowed. So the server MUST do the check by itself and set it if contained in the list.<br>For example if u have a system to configure the allowed origin list in your backend, when writing headers in the response, u compare the request origin with your configured list, if it is u set the header with the request origin value, if not you set nothing.</li>
<li><code>&quot;Access-Control-Allow-Credentials: true&quot;</code> to also send the cookies</li>
</ul>
<h3 id="title-accessing-custom-headers-in-response">Accessing custom headers in response</h3>
<p>Server MUST return <code>Access-Control-Expose-Headers</code> containing the exposed headers.<br>Without that header, the javascript client CANNOT read them.</p>
<h2 id="title-tuto">Tuto</h2>
<ul>
<li><a href="http://www.html5rocks.com/en/tutorials/corhtml">html5rocks.com : CORS</a></li>
</ul>
<h2 id="title-specs">Specs</h2>
<ul>
<li><a href="http://www.w3.org/TR/corhtml">w3c : CORS</a></li>
</ul>
<h2 id="title-play-impl">Play! Impl</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/14430119/play-2-0-1-and-setting-access-control-allow-orightml">play-2-0-1-and-setting-access-control-allow-origin</a></li>
<li><a href="http://www.entreotrascosas.net/configuring-play-framework-for-cross-domain-http-requesthtml">configuring-play-framework-for-cross-domain-http-requests</a></li>
</ul>
<p>Need to add a route for <code>OPTIONS</code> http method and a suited controller.<br>route ex :</p>
<pre><code>OPTIONS       /*path                 controllers.CorsCtrl.checkPreFlight(path)</code></pre><h2 id="title-angular-perform-options-action-instead-of-post">Angular perform OPTIONS action instead of POST</h2>
<ul>
<li><a href="http://stackoverflow.com/questions/12111936/angularjs-performs-an-options-http-request-for-a-cross-origin-resourhtml">angularjs-performs-an-options</a></li>
</ul>
</article></body></html>