(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{448:function(e,t,r){"use strict";r.r(t);var a=r(33),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"tests-d-application-frontend-nouvelle-generation-cypress-io"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tests-d-application-frontend-nouvelle-generation-cypress-io"}},[e._v("#")]),e._v(" Tests d'application frontend nouvelle génération : Cypress.io")]),e._v(" "),r("h2",{attrs:{id:"etat-de-l-art-fin-2017"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#etat-de-l-art-fin-2017"}},[e._v("#")]),e._v(" Etat de l'art fin 2017")]),e._v(" "),r("p",[e._v("rappel déf + expliquer les principaux courants et tendances qui ont fait évoluer le dev web ces dernières années")]),e._v(" "),r("h3",{attrs:{id:"rappel-definitions"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#rappel-definitions"}},[e._v("#")]),e._v(" rappel définitions")]),e._v(" "),r("h4",{attrs:{id:"test-unitaire"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#test-unitaire"}},[e._v("#")]),e._v(" test unitaire")]),e._v(" "),r("p",[e._v("diff entre tests unitaires et tests de collaboration (impact sur le Behavior Driven Dev, article mocking is a code smell)")]),e._v(" "),r("h4",{attrs:{id:"test-integration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#test-integration"}},[e._v("#")]),e._v(" test intégration")]),e._v(" "),r("h4",{attrs:{id:"test-e2e"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#test-e2e"}},[e._v("#")]),e._v(" test e2e")]),e._v(" "),r("ul",[r("li",[e._v("fake (serveurs de mocks, configs applicatives différentes)")]),e._v(" "),r("li",[e._v("true (stack réelle, environnement de stagging (preprod))")])]),e._v(" "),r("h3",{attrs:{id:"devops"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#devops"}},[e._v("#")]),e._v(" devops")]),e._v(" "),r("p",[e._v("build en un clic")]),e._v(" "),r("p",[e._v("CI/CD/CD")]),e._v(" "),r("p",[e._v("always ready to deploy")]),e._v(" "),r("p",[e._v("importance des tests")]),e._v(" "),r("p",[e._v("boucle de feedback")]),e._v(" "),r("h3",{attrs:{id:"nouvelle-architecture-front"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nouvelle-architecture-front"}},[e._v("#")]),e._v(" nouvelle architecture front")]),e._v(" "),r("p",[e._v("passage du templating côté serveur indissocié du backend à séparation nette du frontend qui devient une application à part entière consommant des endpoints REST. (SPA)")]),e._v(" "),r("p",[e._v("peut être une application hybride pour mobile")]),e._v(" "),r("p",[e._v("PWA, Reactive")]),e._v(" "),r("p",[e._v("de plus en plus de logique transférée côté front")]),e._v(" "),r("p",[e._v("de plus en plus de nouvelle logique côté front du fait de la complexification des IHM")]),e._v(" "),r("h3",{attrs:{id:"selenium-webdriver"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#selenium-webdriver"}},[e._v("#")]),e._v(" Selenium / Webdriver")]),e._v(" "),r("p",[e._v("(solution de testing actuelle datant du templating côté serveur)")]),e._v(" "),r("ul",[r("li",[e._v("fonctionnement et problèmes\n"),r("ul",[r("li",[e._v("lourd à mettre en oeuvre (binaire selenium, navigateur)")]),e._v(" "),r("li",[e._v("flaky")]),e._v(" "),r("li",[e._v("lent")])])])]),e._v(" "),r("p",[e._v("mettre en évidence ces problèmes par l'exemple (sujet du tutu) plutôt que l'affirmer simplement")]),e._v(" "),r("ul",[r("li",[e._v("décliner les solutions basées sur selenium / webdriver\n"),r("ul",[r("li",[e._v("protractor, cuncumber, nightwatch")])])])]),e._v(" "),r("p",[e._v("check "),r("a",{attrs:{href:"https://www.blackpepper.co.uk/what-we-think/blog/if-youre-using-browser-sleep-in-your-cucumber-protractor-selenium-tests-youre-doing-it-wrong",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("browser.wait")]),r("OutboundLink")],1),e._v(". Permet de faire à peu près ce que fait cypress out of the box mais "),r("a",{attrs:{href:"https://stackoverflow.com/questions/30205235/protractor-waiting-for-element-to-be-in-dom?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa",target:"_blank",rel:"noopener noreferrer"}},[e._v("en devant coder tout"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp",target:"_blank",rel:"noopener noreferrer"}},[e._v("cf doc officielle selenium"),r("OutboundLink")],1),e._v(" avec les explicits et implicits waits.")]),e._v(" "),r("h2",{attrs:{id:"protractor-vs-cypress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#protractor-vs-cypress"}},[e._v("#")]),e._v(" protractor vs cypress")]),e._v(" "),r("p",[e._v("sujet du tuto, prendre protractor qui est un grand classique d'utilisation de selenium pour tester des SPA AngularJS / Angular")]),e._v(" "),r("p",[e._v("et le comparer à cypress pour voir la plus-value de cypress")]),e._v(" "),r("h3",{attrs:{id:"theorie"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#theorie"}},[e._v("#")]),e._v(" théorie")]),e._v(" "),r("h4",{attrs:{id:"archi-de-selenium"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#archi-de-selenium"}},[e._v("#")]),e._v(" archi de selenium")]),e._v(" "),r("p",[e._v("explications de l'archi")]),e._v(" "),r("h4",{attrs:{id:"archi-de-cypress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#archi-de-cypress"}},[e._v("#")]),e._v(" archi de cypress")]),e._v(" "),r("p",[e._v("explications de l'archi")]),e._v(" "),r("h3",{attrs:{id:"exemple-basique"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#exemple-basique"}},[e._v("#")]),e._v(" exemple basique")]),e._v(" "),r("h4",{attrs:{id:"todomvc"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#todomvc"}},[e._v("#")]),e._v(" TodoMVC")]),e._v(" "),r("p",[e._v("présententation de ce repo.")]),e._v(" "),r("p",[e._v("A ce stade on a une webapp toute bête qui utilise le localStorage comme backend.")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/MatthewVita/TodoMVC-Protractor-Example",target:"_blank",rel:"noopener noreferrer"}},[e._v("exemple avec TodoMVC app + protractor"),r("OutboundLink")],1)])]),e._v(" "),r("h4",{attrs:{id:"protractor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#protractor"}},[e._v("#")]),e._v(" protractor")]),e._v(" "),r("h5",{attrs:{id:"installation-dependances"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#installation-dependances"}},[e._v("#")]),e._v(" installation + dépendances")]),e._v(" "),r("h5",{attrs:{id:"execution"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#execution"}},[e._v("#")]),e._v(" exécution")]),e._v(" "),r("h4",{attrs:{id:"cypress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cypress"}},[e._v("#")]),e._v(" cypress")]),e._v(" "),r("h5",{attrs:{id:"installation-dependances-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#installation-dependances-2"}},[e._v("#")]),e._v(" installation + dépendances")]),e._v(" "),r("h5",{attrs:{id:"execution-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#execution-2"}},[e._v("#")]),e._v(" exécution")]),e._v(" "),r("p",[e._v("manque réécriture des mêmes tests que pour protractor.")]),e._v(" "),r("h3",{attrs:{id:"ajouter-un-backend"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ajouter-un-backend"}},[e._v("#")]),e._v(" ajouter un backend")]),e._v(" "),r("p",[e._v("un backend express sans BDD")]),e._v(" "),r("p",[e._v("avec simulation latence réseau + traitements serveurs via un timeout côté serveur")]),e._v(" "),r("p",[e._v("modifier la webapp en conséquence")]),e._v(" "),r("p",[e._v("on s'approche des conditions réelles")]),e._v(" "),r("h4",{attrs:{id:"impacts-sur-protractor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#impacts-sur-protractor"}},[e._v("#")]),e._v(" impacts sur protractor")]),e._v(" "),r("p",[e._v("les tests fails")]),e._v(" "),r("p",[e._v("obligé d'ajouter des timeouts")]),e._v(" "),r("p",[e._v("augmentation de la durée d'exécution")]),e._v(" "),r("p",[e._v("les tests peuvent échouer + facilement")]),e._v(" "),r("h4",{attrs:{id:"impacts-sur-cypress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#impacts-sur-cypress"}},[e._v("#")]),e._v(" impacts sur cypress")]),e._v(" "),r("p",[e._v("les tests sont toujours OK")]),e._v(" "),r("p",[e._v("exécution plus longue")]),e._v(" "),r("p",[e._v("possibilté de stub les xhr entrainant une amélioration de l'exécution")]),e._v(" "),r("h3",{attrs:{id:"simuler-des-problemes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#simuler-des-problemes"}},[e._v("#")]),e._v(" simuler des problèmes")]),e._v(" "),r("p",[e._v("ajouter des erreurs dans le code front pour voir le debug")]),e._v(" "),r("h4",{attrs:{id:"debug-avec-protractor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debug-avec-protractor"}},[e._v("#")]),e._v(" debug avec protractor")]),e._v(" "),r("h4",{attrs:{id:"debug-avec-cypress"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#debug-avec-cypress"}},[e._v("#")]),e._v(" debug avec cypress")]),e._v(" "),r("p",[e._v("msg erreur, time travel, vidéos, usage debugger navigateur")]),e._v(" "),r("h3",{attrs:{id:"combinaison-ti-fake-e2e"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#combinaison-ti-fake-e2e"}},[e._v("#")]),e._v(" combinaison TI + fake e2e")]),e._v(" "),r("h4",{attrs:{id:"impacts-protractor"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#impacts-protractor"}},[e._v("#")]),e._v(" impacts protractor")]),e._v(" "),r("p",[e._v("très difficile à réaliser")]),e._v(" "),r("h4",{attrs:{id:"impacts-e2e"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#impacts-e2e"}},[e._v("#")]),e._v(" impacts e2e")]),e._v(" "),r("p",[e._v("les TI peuvent être écrits via cypress")]),e._v(" "),r("p",[e._v("données récupérées pour les tests e2e stubbés")]),e._v(" "),r("h3",{attrs:{id:"nouveau-champ-de-test"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nouveau-champ-de-test"}},[e._v("#")]),e._v(" nouveau champ de test")]),e._v(" "),r("ul",[r("li",[e._v("tester facilement le comportement du front en fonction des retours http (200, 4xx, 5xx, ...)")]),e._v(" "),r("li",[e._v("assertions sur les payload de sortie du front (POST, PUT)")])])])}),[],!1,null,null,null);t.default=s.exports}}]);