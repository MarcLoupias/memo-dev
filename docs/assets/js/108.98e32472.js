(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{452:function(s,e,a){"use strict";a.r(e);var n=a(42),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"nodejs-express-project-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-express-project-structure"}},[s._v("#")]),s._v(" nodejs - express project structure")]),s._v(" "),a("h2",{attrs:{id:"express-internals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#express-internals"}},[s._v("#")]),s._v(" express internals")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.sohamkamani.com/blog/2018/05/30/understanding-how-expressjs-works/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How express.js works - Understanding the internals of the express library - www.sohamkamani.com/blog - 20180530"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"project-pov"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-pov"}},[s._v("#")]),s._v(" project POV")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://seanmcgary.com/posts/how-to-structure-a-nodejs-express-project",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to structure a Node.js Express project : Sean McGary 20160327"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("Embrace the Majestic Monolith - at least to start :")]),s._v(" "),a("ul",[a("li",[s._v("All of your code is in one place")]),s._v(" "),a("li",[s._v("Everyone on your team can find things easily")]),s._v(" "),a("li",[s._v("No npm dependency management hell")])]),s._v(" "),a("p",[s._v("Example writing a RESTful API service built on top of PostgreSQL.")]),s._v(" "),a("p",[s._v("Three different layers : Models, lib, and services.")]),s._v(" "),a("p",[s._v('Data model is simple : each "company" can have n many "users" associated.')]),s._v(" "),a("p",[s._v("The directory structure :")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├── index.js\n├── lib\n│   ├── company\n│   │   └── index.js\n│   └── user\n│       └── index.js\n├── models\n│   ├── company.js\n│   └── user.js\n├── routes\n│   └── account\n│       └── index.js\n└── services\n    └── account\n        └── index.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("The models schema :")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("user\n----------\n- id\n- name\n- email\n- password\n- company_id\n\n\ncompany\n----------\n- id\n- name\n\n\nuser (1) --\x3e (1) company\ncompany (1) --\x3e (n) user\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#model"}},[s._v("#")]),s._v(" model")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://docs.sequelizejs.com/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("sequelize"),a("OutboundLink")],1),s._v(" (featureful and powerfuly ORM)")]),s._v(" "),a("p",[s._v("Your models can express relationships and are used to build sets of data to eventually send to the end user.")]),s._v(" "),a("h3",{attrs:{id:"lib"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lib"}},[s._v("#")]),s._v(" lib")]),s._v(" "),a("p",[s._v("This is where we start to actually interact with our models.")]),s._v(" "),a("p",[s._v("Create a corresponding file for each model that will wrap basic CRUD operations of a model.")]),s._v(" "),a("p",[s._v("So if we want to list all the users for a company we write a "),a("code",[s._v("lib/user/index.js")]),s._v(" file implementing a "),a("code",[s._v("listUsersForCompany")]),s._v(" function.")]),s._v(" "),a("h3",{attrs:{id:"services"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[s._v("#")]),s._v(" services")]),s._v(" "),a("p",[s._v("They take different model-level modules and perform some combination of actions.")]),s._v(" "),a("p",[s._v("We want to write a registration system for our application. When a user registers, you take their name, email, and\npassword, but you also need to create a company profile which could potentially have more users down the road.")]),s._v(" "),a("p",[s._v("One company per user, many users per company. Being that a user depends on the existence of a company, we're going to\ntransactionally create the two together to illustrate how a service would work.")]),s._v(" "),a("p",[s._v("So we create a createUser function in "),a("code",[s._v("lib/user/index.js")]),s._v(" and a "),a("code",[s._v("createCompany")]),s._v(" function in "),a("code",[s._v("lib/company/index.js")]),s._v(".")]),s._v(" "),a("p",[s._v("Then a "),a("code",[s._v("registerUserAndCompany")]),s._v(" function wires everything in a "),a("code",[s._v("services/account/index.js")]),s._v(" file using sequelize to make\nit transactional.")]),s._v(" "),a("h2",{attrs:{id:"entity-pov"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-pov"}},[s._v("#")]),s._v(" entity POV")]),s._v(" "),a("p",[s._v("Example writing a messenger class in "),a("code",[s._v("C#")]),s._v(".")]),s._v(" "),a("p",[s._v("It is a classic interface implemented by a class :")]),s._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IMessenger")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SendMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("HandleMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s._v("IMessage")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ComposeMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Messenger")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token type-list"}},[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IMessenger")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SendMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("HandleMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s._v("IMessage")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ComposeMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("In JavaScript we use functional style so we split each function in a separated file (no shared state\nso there is no need to keep them in the same file)")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("messenger\n    __tests__\n        composeMessage.test.js\n        handleMessage.test.js\n        sendMessage.test.js\n    composeMessage.js\n    handleMessage.js\n    sendMessage.js\n    index.js // this file combines them all together\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);