(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{477:function(e,t,o){"use strict";o.r(t);var a=o(42),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"nodejs-module-system"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-module-system"}},[e._v("#")]),e._v(" nodejs - module system")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://blog.risingstack.com/node-js-at-scale-module-system-commonjs-require/",target:"_blank",rel:"noopener noreferrer"}},[e._v("How the module system, CommonJS & require works"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Node.js v6.11.2 Documentation - Modules"),o("OutboundLink")],1)]),e._v(" "),o("p",[e._v("Node.js module system is based on the "),o("a",{attrs:{href:"http://wiki.commonjs.org/wiki/CommonJS",target:"_blank",rel:"noopener noreferrer"}},[e._v("CommonJS spec"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://medium.com/dailyjs/es6-modules-node-js-and-the-michael-jackson-solution-828dc244b8b",target:"_blank",rel:"noopener noreferrer"}},[e._v("ES6 modules, Node.js and the Michael Jackson Solution"),o("OutboundLink")],1)]),e._v(" "),o("blockquote",[o("ul",[o("li",[e._v("CommonJS to the rescue")]),e._v(" "),o("li",[e._v("How ES6 modules work and why Node.js hasnâ€™t implemented it yet")]),e._v(" "),o("li",[e._v("A note about Babel")]),e._v(" "),o("li",[e._v("Why ES6 modules are good and how to get the best of both worlds")])])]),e._v(" "),o("h2",{attrs:{id:"articles"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#articles"}},[e._v("#")]),e._v(" articles")]),e._v(" "),o("p",[o("a",{attrs:{href:"https://stackoverflow.com/questions/42401079/nodejs-require",target:"_blank",rel:"noopener noreferrer"}},[e._v("NodeJS require('..')? : stackoverflow.com"),o("OutboundLink")],1)]),e._v(" "),o("p",[o("a",{attrs:{href:"https://medium.freecodecamp.org/requiring-modules-in-node-js-everything-you-need-to-know-e7fbd119be8",target:"_blank",rel:"noopener noreferrer"}},[e._v("Requiring modules in Node.js: Everything you need to know : medium.freecodecamp.org : 20170319"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"tips-rules"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#tips-rules"}},[e._v("#")]),e._v(" tips & rules")]),e._v(" "),o("h3",{attrs:{id:"module-wrapper"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#module-wrapper"}},[e._v("#")]),e._v(" module wrapper")]),e._v(" "),o("p",[e._v("Variables inside a module are private to that module because each module is wrapped.")]),e._v(" "),o("div",{staticClass:"language-javascript line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-javascript"}},[o("code",[o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),o("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),o("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("exports"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" require"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" module"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" __filename"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" __dirname")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Your module code actually lives in here")]),e._v("\n"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[e._v("1")]),o("br"),o("span",{staticClass:"line-number"},[e._v("2")]),o("br"),o("span",{staticClass:"line-number"},[e._v("3")]),o("br")])]),o("p",[e._v("See "),o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_wrapper",target:"_blank",rel:"noopener noreferrer"}},[e._v("module wrapper doc section"),o("OutboundLink")],1),e._v(" for details.")]),e._v(" "),o("p",[e._v("The CommonJS module system uses a "),o("strong",[e._v("runtime evaluation of the modules")]),e._v(", wrapping them into a function before the execution.")]),e._v(" "),o("h3",{attrs:{id:"modules-are-singleton"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#modules-are-singleton"}},[e._v("#")]),e._v(" modules are singleton")]),e._v(" "),o("p",[e._v("Module caching in the "),o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_caching",target:"_blank",rel:"noopener noreferrer"}},[e._v("node documentation"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("Everytime you use "),o("code",[e._v("require('awesome-module')")]),e._v(", node returns the same instance. If you want to execute initialization code\nat each "),o("code",[e._v("require")]),e._v(" call, exports a "),o("code",[e._v("function")]),e._v(".")]),e._v(" "),o("p",[e._v("Module unicity is based on the directory ("),o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_module_caching_caveats",target:"_blank",rel:"noopener noreferrer"}},[e._v("see Module Caching Caveats"),o("OutboundLink")],1),e._v(").")]),e._v(" "),o("h3",{attrs:{id:"module-types"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#module-types"}},[e._v("#")]),e._v(" module types")]),e._v(" "),o("p",[e._v("The "),o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_the_module_object",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("module")]),e._v(" Object definition"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("h4",{attrs:{id:"core-module"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#core-module"}},[e._v("#")]),e._v(" core module")]),e._v(" "),o("p",[e._v("The node builtin modules ("),o("code",[e._v("http")]),e._v(", "),o("code",[e._v("assert")]),e._v(", ...).")]),e._v(" "),o("p",[e._v("They have priority over others modules. For example if a file module is "),o("code",[e._v("http.js")]),e._v(", "),o("code",[e._v("require('http');")]),e._v(" will result loading\nthe node "),o("code",[e._v("http")]),e._v(" module and not the file.")]),e._v(" "),o("h4",{attrs:{id:"file-module"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#file-module"}},[e._v("#")]),e._v(" file module")]),e._v(" "),o("p",[e._v("File extension is optional.")]),e._v(" "),o("p",[e._v("A required module prefixed with "),o("code",[e._v("'/'")]),e._v(" is an absolute path to the file. For example, "),o("code",[e._v("require('/home/marco/foo.js')")]),e._v(" will load the file at "),o("code",[e._v("/home/marco/foo.js")]),e._v(".")]),e._v(" "),o("p",[e._v("A required module prefixed with "),o("code",[e._v("'./'")]),e._v(" is relative to the file calling "),o("code",[e._v("require()")]),e._v(".")]),e._v(" "),o("p",[e._v("Without a leading "),o("code",[e._v("'/'")]),e._v(", "),o("code",[e._v("'./'")]),e._v(", or "),o("code",[e._v("'../'")]),e._v(" to indicate a file, the module must either be a core module or is loaded from a "),o("code",[e._v("node_modules")]),e._v(" folder.")]),e._v(" "),o("h4",{attrs:{id:"folder-module"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#folder-module"}},[e._v("#")]),e._v(" folder module")]),e._v(" "),o("p",[e._v("There are three ways in which a folder may be passed to "),o("code",[e._v("require()")]),e._v(" as an argument.")]),e._v(" "),o("h5",{attrs:{id:"folder-contains-a-default-index-js"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#folder-contains-a-default-index-js"}},[e._v("#")]),e._v(" folder contains a default "),o("code",[e._v("index.js")])]),e._v(" "),o("p",[e._v("If there is no "),o("code",[e._v("package.json")]),e._v(" file present in the directory, then node will attempt to load an "),o("code",[e._v("index.js")]),e._v(" out of that directory.")]),e._v(" "),o("p",[e._v("For example, if there was no "),o("code",[e._v("package.json")]),e._v(" file in the above example, then "),o("code",[e._v("require('./some-library')")]),e._v(" would attempt to load "),o("code",[e._v("./some-library/index.js")]),e._v(".")]),e._v(" "),o("h5",{attrs:{id:"folder-is-defined-with-a-package-json"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#folder-is-defined-with-a-package-json"}},[e._v("#")]),e._v(" folder is defined with a "),o("code",[e._v("package.json")])]),e._v(" "),o("p",[e._v("Create a "),o("code",[e._v("package.json")]),e._v(" file in the root of the folder, which specifies a main module.")]),e._v(" "),o("div",{staticClass:"language-json line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-json"}},[o("code",[o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),o("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"some-library"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),o("span",{pre:!0,attrs:{class:"token property"}},[e._v('"main"')]),o("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),o("span",{pre:!0,attrs:{class:"token string"}},[e._v('"./lib/some-library.js"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[e._v("1")]),o("br")])]),o("p",[e._v("If this was in a folder at "),o("code",[e._v("./some-library")]),e._v(", then "),o("code",[e._v("require('./some-library')")]),e._v(" would attempt to load "),o("code",[e._v("./some-library/lib/some-library.js")]),e._v(".")]),e._v(" "),o("h5",{attrs:{id:"folder-is-in-a-node-modules-directory"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#folder-is-in-a-node-modules-directory"}},[e._v("#")]),e._v(" folder is in a "),o("code",[e._v("node_modules")]),e._v(" directory")]),e._v(" "),o("p",[e._v("If node cannot load a default "),o("code",[e._v("index.js")]),e._v(" file nor find a "),o("code",[e._v("package.json")]),e._v(", it will search for "),o("code",[e._v("node_modules")]),e._v(" directory on the file system.")]),e._v(" "),o("p",[e._v("See "),o("a",{attrs:{href:"https://nodejs.org/dist/latest-v6.x/docs/api/modules.html#modules_loading_from_node_modules_folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("Loading from "),o("code",[e._v("node_modules")]),e._v(" Folders"),o("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);