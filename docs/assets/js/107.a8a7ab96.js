(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{275:function(s,e,t){"use strict";t.r(e);var n=t(0),a=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("div",{staticClass:"content"},[s._m(0),s._v(" "),s._m(1),s._v(" "),e("p",[e("a",{attrs:{href:"https://www.sohamkamani.com/blog/2018/05/30/understanding-how-expressjs-works/",target:"_blank",rel:"noopener noreferrer"}},[s._v("How express.js works - Understanding the internals of the express library - www.sohamkamani.com/blog - 20180530"),e("OutboundLink")],1)]),s._v(" "),s._m(2),s._v(" "),e("p",[e("a",{attrs:{href:"https://seanmcgary.com/posts/how-to-structure-a-nodejs-express-project",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to structure a Node.js Express project : Sean McGary 20160327"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("Embrace the Majestic Monolith - at least to start :")]),s._v(" "),s._m(3),s._v(" "),e("p",[s._v("Example writing a RESTful API service built on top of PostgreSQL.")]),s._v(" "),e("p",[s._v("Three different layers : Models, lib, and services.")]),s._v(" "),e("p",[s._v('Data model is simple : each "company" can have n many "users" associated.')]),s._v(" "),e("p",[s._v("The directory structure :")]),s._v(" "),s._m(4),e("p",[s._v("The models schema :")]),s._v(" "),s._m(5),s._m(6),s._v(" "),e("p",[e("a",{attrs:{href:"http://docs.sequelizejs.com/en/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("sequelize"),e("OutboundLink")],1),s._v(" (featureful and powerfuly ORM)")]),s._v(" "),e("p",[s._v("Your models can express relationships and are used to build sets of data to eventually send to the end user.")]),s._v(" "),s._m(7),s._v(" "),e("p",[s._v("This is where we start to actually interact with our models.")]),s._v(" "),e("p",[s._v("Create a corresponding file for each model that will wrap basic CRUD operations of a model.")]),s._v(" "),s._m(8),s._v(" "),s._m(9),s._v(" "),e("p",[s._v("They take different model-level modules and perform some combination of actions.")]),s._v(" "),e("p",[s._v("We want to write a registration system for our application. When a user registers, you take their name, email, and\npassword, but you also need to create a company profile which could potentially have more users down the road.")]),s._v(" "),e("p",[s._v("One company per user, many users per company. Being that a user depends on the existence of a company, we're going to\ntransactionally create the two together to illustrate how a service would work.")]),s._v(" "),s._m(10),s._v(" "),s._m(11),s._v(" "),s._m(12),s._v(" "),s._m(13),s._v(" "),e("p",[s._v("It is a classic interface implemented by a class :")]),s._v(" "),s._m(14),e("p",[s._v("In JavaScript we use functional style so we split each function in a separated file (no shared state\nso there is no need to keep them in the same file)")]),s._v(" "),s._m(15)])}),[function(){var s=this._self._c;return s("h1",{attrs:{id:"nodejs-express-project-structure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-express-project-structure"}},[this._v("#")]),this._v(" nodejs - express project structure")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"express-internals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#express-internals"}},[this._v("#")]),this._v(" express internals")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"project-pov"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#project-pov"}},[this._v("#")]),this._v(" project POV")])},function(){var s=this._self._c;return s("ul",[s("li",[this._v("All of your code is in one place")]),this._v(" "),s("li",[this._v("Everyone on your team can find things easily")]),this._v(" "),s("li",[this._v("No npm dependency management hell")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(".\n├── index.js\n├── lib\n│   ├── company\n│   │   └── index.js\n│   └── user\n│       └── index.js\n├── models\n│   ├── company.js\n│   └── user.js\n├── routes\n│   └── account\n│       └── index.js\n└── services\n    └── account\n        └── index.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("user\n----------\n- id\n- name\n- email\n- password\n- company_id\n\n\ncompany\n----------\n- id\n- name\n\n\nuser (1) --\x3e (1) company\ncompany (1) --\x3e (n) user\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])])},function(){var s=this._self._c;return s("h3",{attrs:{id:"model"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model"}},[this._v("#")]),this._v(" model")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"lib"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lib"}},[this._v("#")]),this._v(" lib")])},function(){var s=this._self._c;return s("p",[this._v("So if we want to list all the users for a company we write a "),s("code",[this._v("lib/user/index.js")]),this._v(" file implementing a "),s("code",[this._v("listUsersForCompany")]),this._v(" function.")])},function(){var s=this._self._c;return s("h3",{attrs:{id:"services"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#services"}},[this._v("#")]),this._v(" services")])},function(){var s=this._self._c;return s("p",[this._v("So we create a createUser function in "),s("code",[this._v("lib/user/index.js")]),this._v(" and a "),s("code",[this._v("createCompany")]),this._v(" function in "),s("code",[this._v("lib/company/index.js")]),this._v(".")])},function(){var s=this._self._c;return s("p",[this._v("Then a "),s("code",[this._v("registerUserAndCompany")]),this._v(" function wires everything in a "),s("code",[this._v("services/account/index.js")]),this._v(" file using sequelize to make\nit transactional.")])},function(){var s=this._self._c;return s("h2",{attrs:{id:"entity-pov"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entity-pov"}},[this._v("#")]),this._v(" entity POV")])},function(){var s=this._self._c;return s("p",[this._v("Example writing a messenger class in "),s("code",[this._v("C#")]),this._v(".")])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"language-csharp line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-csharp"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IMessenger")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("SendMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("HandleMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s._v("IMessage")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ComposeMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Messenger")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token type-list"}},[e("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IMessenger")])]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bool")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("SendMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("HandleMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token return-type class-name"}},[s._v("IMessage")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ComposeMessage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("messenger\n    __tests__\n        composeMessage.test.js\n        handleMessage.test.js\n        sendMessage.test.js\n    composeMessage.js\n    handleMessage.js\n    sendMessage.js\n    index.js // this file combines them all together\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])])}],!1,null,null,null);e.default=a.exports}}]);