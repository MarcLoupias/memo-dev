<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui"><meta name="robots" content="none"><title>marlou knowledge base</title><link href="/github-markdown.d098492d.css" rel="stylesheet" media="all"><link href="/main.cb64a04a.css" rel="stylesheet" media="all"><link href="/github.51c27d45.css" rel="stylesheet"><script src="/docs.a0c71561.js"></script></head><body><article class="markdown-body"><h1 id="title-webapp-build">webapp build</h1> <h2 id="title-strategy">strategy</h2> <p><a href="https://youtu.be/k0_gi7BoBgw?t=2251">État de l’art de ES2015+ dans Node.js et le navigateur - Blend Web Mix - Christophe Porteneuve - 20161121</a></p> <blockquote> <p>(Par compilation ils parlent de Babel notamment)<br>Question : Tu compiles pour autant de cibles que tu as de navigaters ?<br>Réponse : Nononon tu fais une compilation, mais par contre tu vises le plus petit dénominateur commun.<br>Tu peux choisir de faire plusieurs compilations mais ça va complexifier pas mal de chaine de déploiement.<br>Comment tu vas faire, tu vas faire du browser sniffing ? Avec la gueule qu’ont les user-agents aujourd’hui ? Non c’est pas possible.<br>Tu pourrais faire de la feature detection, le problème c’est que tu vas ralentir énormément puisque tu dois d’abord feature détecter puis recharger derrière.<br>En gros ce qui marche, même pour les gros sites, c’est le plus petit dénominateur commun. Même si tu transpiles tout, parce que<br>tu vises IE9+ en gros, t’obtiens quelque chose d’éminament utilisable. C’est ce que font les gros.<br>Intellectuellement on fait “ah ouai machin” mais, commence par minimiser la jpeg de 900ko dans ta home, implémente http2,<br>fais des choses qui servent pour de vrai, mettre des vrais entêtes de caches, etc …</p> </blockquote> <h2 id="title-bundlers">bundlers</h2> <h3 id="title-bundler-projects">bundler projects</h3> <p><a href="http://browserify.org/">browserify</a></p> <p><a href="https://jspm.io/">JSPM</a></p> <blockquote> <p>package manager (onto npm and github) AND bundler<br>Uses <a href="https://github.com/systemjs/systemjs">SystemJS</a></p> </blockquote> <p><a href="https://webpack.js.org/">webpack</a></p> <p><a href="https://rollupjs.org/guide/en">rollup.js</a></p> <p><a href="http://brunch.io/">brunch</a></p> <p><a href="https://fuse-box.org/">fuse-box</a></p> <p><a href="https://parceljs.org/">Parcel</a></p> <h3 id="title-comparison-by-features">Comparison by features</h3> <p>Extracted from the unreadable <a href="https://webpack.js.org/comparison/">webpack website</a> markdown table :</p> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>Additional chunks are loaded on demand</td> <td><strong>yes</strong></td> <td><strong>yes</strong></td> <td>no</td> <td><a href="https://github.com/systemjs/systemjs/blob/master/docs/system-api.md#systemimportmodulename--normalizedparentname---promisemodule">System.import</a></td> <td>no</td> <td>no</td> </tr> <tr> <td>AMD <code>define</code></td> <td><strong>yes</strong></td> <td><strong>yes</strong></td> <td><a href="https://github.com/jaredhanson/deamdify">deamdify</a></td> <td>yes</td> <td><a href="https://github.com/piuccio/rollup-plugin-amd">rollup-plugin-amd</a></td> <td>yes</td> </tr> <tr> <td>AMD <code>require</code></td> <td><strong>yes</strong></td> <td><strong>yes</strong></td> <td>no</td> <td>yes</td> <td>no</td> <td>yes</td> </tr> <tr> <td>AMD <code>require</code> loads on demand</td> <td><strong>yes</strong></td> <td>with manual configuration</td> <td>no</td> <td>yes</td> <td>no</td> <td>no</td> </tr> </tbody></table> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>CommonJS <code>exports</code></td> <td><strong>yes</strong></td> <td>only wrapping in <code>define</code></td> <td><strong>yes</strong></td> <td>yes</td> <td><a href="https://github.com/rollup/rollup-plugin-commonjs">commonjs-plugin</a></td> <td>yes</td> </tr> <tr> <td>CommonJS <code>require</code></td> <td><strong>yes</strong></td> <td>only wrapping in <code>define</code></td> <td><strong>yes</strong></td> <td>yes</td> <td><a href="https://github.com/rollup/rollup-plugin-commonjs">commonjs-plugin</a></td> <td>yes</td> </tr> <tr> <td>CommonJS <code>require.resolve</code></td> <td><strong>yes</strong></td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> <td></td> </tr> <tr> <td>Concat in require <code>require(&quot;./fi&quot; + &quot;le&quot;)</code></td> <td><strong>yes</strong></td> <td>no♦</td> <td>no</td> <td>no</td> <td>no</td> <td></td> </tr> </tbody></table> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>Debugging support</td> <td><strong>SourceUrl, SourceMaps</strong></td> <td>not required</td> <td>SourceMaps</td> <td><strong>SourceUrl, SourceMaps</strong></td> <td><strong>SourceUrl, SourceMaps</strong></td> <td>SourceMaps</td> </tr> <tr> <td>Dependencies</td> <td>19MB / 127 packages</td> <td>11MB / 118 packages</td> <td><strong>1.2MB / 1 package</strong></td> <td>26MB / 131 packages</td> <td>?MB / 3 packages</td> <td></td> </tr> <tr> <td>ES2015 <code>import</code>/<code>export</code></td> <td><strong>yes</strong> (webpack 2)</td> <td>no</td> <td>no</td> <td><strong>yes</strong></td> <td><strong>yes</strong></td> <td>yes, via <a href="https://github.com/gcollazo/es6-module-transpiler-brunch">es6 module transpiler</a></td> </tr> <tr> <td>Expressions in require (guided) <code>require(&quot;./templates/&quot; + template)</code></td> <td><strong>yes (all files matching included)</strong></td> <td>no♦</td> <td>no</td> <td>no</td> <td>no</td> <td>no</td> </tr> <tr> <td>Expressions in require (free) <code>require(moduleName)</code></td> <td>with manual configuration</td> <td>no♦</td> <td>no</td> <td>no</td> <td>no</td> <td></td> </tr> </tbody></table> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>Generate a single bundle</td> <td><strong>yes</strong></td> <td>yes♦</td> <td>yes</td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> <tr> <td>Indirect require <code>var r = require; r(&quot;./file&quot;)</code></td> <td><strong>yes</strong></td> <td>no♦</td> <td>no</td> <td>no</td> <td>no</td> <td></td> </tr> <tr> <td>Load each file separate</td> <td>no</td> <td>yes</td> <td>no</td> <td>yes</td> <td>no</td> <td>no</td> </tr> <tr> <td>Mangle path names</td> <td><strong>yes</strong></td> <td>no</td> <td>partial</td> <td>yes</td> <td>not required (path names are not included in the bundle)</td> <td>no</td> </tr> <tr> <td>Minimizing</td> <td>uglify</td> <td>uglify, closure compiler</td> <td><a href="https://github.com/hughsk/uglifyify">uglifyify</a></td> <td>yes</td> <td><a href="https://github.com/TrySound/rollup-plugin-uglify">uglify-plugin</a></td> <td><a href="https://github.com/brunch/uglify-js-brunch">UglifyJS-brunch</a></td> </tr> </tbody></table> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>Multi pages build with common bundle</td> <td>with manual configuration</td> <td><strong>yes</strong></td> <td>with manual configuration</td> <td>with bundle arithmetic</td> <td>no</td> <td>no</td> </tr> <tr> <td>Multiple bundles</td> <td><strong>yes</strong></td> <td>with manual configuration</td> <td>with manual configuration</td> <td>yes</td> <td>no</td> <td>yes</td> </tr> <tr> <td>Node.js built-in libs <code>require(&quot;path&quot;)</code></td> <td><strong>yes</strong></td> <td>no</td> <td><strong>yes</strong></td> <td><strong>yes</strong></td> <td><a href="https://github.com/rollup/rollup-plugin-node-resolve">node-resolve-plugin</a></td> <td></td> </tr> <tr> <td>Other Node.js stuff</td> <td>process, __dir/filename, global</td> <td>-</td> <td>process, __dir/filename, global</td> <td>process, __dir/filename, global for cjs</td> <td>global (<a href="https://github.com/rollup/rollup-plugin-commonjs">commonjs-plugin</a>)</td> <td></td> </tr> <tr> <td>Plugins</td> <td><strong>yes</strong></td> <td>yes</td> <td><strong>yes</strong></td> <td>yes</td> <td>yes</td> <td>yes</td> </tr> </tbody></table> <table> <thead> <tr> <th>Feature</th> <th>webpack/webpack</th> <th>jrburke/requirejs</th> <th>substack/node-browserify</th> <th>jspm/jspm-cli</th> <th>rollup/rollup</th> <th>brunch/brunch</th> </tr> </thead> <tbody><tr> <td>Preprocessing</td> <td><strong>loaders, <a href="https://github.com/webpack/transform-loader">transforms</a></strong></td> <td>loaders</td> <td>transforms</td> <td>plugin translate</td> <td>plugin transforms</td> <td>compilers, optimizers</td> </tr> <tr> <td>Replacement for browser</td> <td><code>web_modules</code>, <code>.web.js</code>, package.json field, alias config option</td> <td>alias option</td> <td>package.json field, alias option</td> <td>package.json, alias option</td> <td>no</td> <td></td> </tr> <tr> <td>Requirable files</td> <td>file system</td> <td><strong>web</strong></td> <td>file system</td> <td>through plugins</td> <td>file system or through plugins</td> <td>file system</td> </tr> <tr> <td>Runtime overhead</td> <td><strong>243B + 20B per module + 4B per dependency</strong></td> <td>14.7kB + 0B per module + (3B + X) per dependency</td> <td>415B + 25B per module + (6B + 2X) per dependency</td> <td>5.5kB for self-executing bundles, 38kB for full loader and polyfill, 0 plain modules, 293B CJS, 139B ES2015 System.register before gzip</td> <td><strong>none for ES2015 modules</strong> (other formats may have)</td> <td></td> </tr> <tr> <td>Watch mode</td> <td>yes</td> <td>not required</td> <td><a href="https://github.com/substack/watchify">watchify</a></td> <td>not needed in dev</td> <td><a href="https://github.com/rollup/rollup-watch">rollup-watch</a></td> <td>yes</td> </tr> </tbody></table> </article></body></html>