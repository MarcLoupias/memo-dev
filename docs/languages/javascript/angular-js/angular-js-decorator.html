<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui"><meta name="robots" content="none"><title>marlou knowledge base</title><link href="../../../github-markdown.css" rel="stylesheet" media="all"><link href="../../../main.css" rel="stylesheet" media="all"><link href="../../../github.css" rel="stylesheet"><script src="../../../index.js"></script></head><body><article class="markdown-body"><h1 id="title-decorator-usage-in-angularjs">decorator usage in angularjs</h1>
<h2 id="title-decorator-for-a-service">decorator for a service</h2>
<ul>
<li>[from off doc] (<a href="https://code.angularjs.org/1.4.8/docs/api/auto/service/$provide#decorathtml">https://code.angularjs.org/1.4.8/docs/api/auto/service/$provide#decorator</a>)</li>
<li>[using-module-decorator-in-angularjs-1-4] (<a href="http://www.bennadel.com/blog/2870-using-module-decorator-in-angularjs-1-4.hhtml">http://www.bennadel.com/blog/2870-using-module-decorator-in-angularjs-1-4.htm</a>)</li>
</ul>
<h2 id="title-decorator-for-a-directive">decorator for a directive</h2>
<ul>
<li>[experiment-decorating-directives] (<a href="http://angular-tips.com/blog/2013/09/experiment-decorating-directivehtml">http://angular-tips.com/blog/2013/09/experiment-decorating-directives/</a>)</li>
<li>[overriding-directive-definitions-in-angularjs] (<a href="http://www.bennadel.com/blog/2926-overriding-directive-definitions-in-angularjs.hhtml">http://www.bennadel.com/blog/2926-overriding-directive-definitions-in-angularjs.htm</a>)</li>
<li>[angular-hacking-core : brian ford] (<a href="http://briantford.com/blog/angular-hacking-cohtml">http://briantford.com/blog/angular-hacking-core</a>)</li>
<li>[decorating-the-ng-click-directive-in-angularjs : stackoverflow] (<a href="http://stackoverflow.com/questions/18335574/decorating-the-ng-click-directive-in-angularhtml">http://stackoverflow.com/questions/18335574/decorating-the-ng-click-directive-in-angularjs</a>)</li>
</ul>
<h2 id="title-exemple--decorator-de-ng-if">exemple : decorator de <code>ng-if</code></h2>
<p>Permet de rajouter un paramètre à <code>ng-if</code> dans le html sous la forme d’un autre attribut (<code>ng-if-param</code>).<br>Les valeurs passées à ce paramètre servent d’entrée pour un service exécuté dans le decorator.<br>Très utile pour la gestion des droits par exemple.</p>
<p>Usage dans le html :</p>
<pre><code>&lt;div ng-if=&quot;ngIfValue&quot; ng-if-param=&quot;paramValue&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="lang-javascript">(function (angular) {
    &#39;use strict&#39;;

    angular
        .module(&#39;app&#39;)
        .config(config);

    config.$inject = [&#39;$provide&#39;];

    function config($provide) {

        $provide.decorator(&quot;ngIfDirective&quot;, [&#39;$delegate&#39;, &#39;customService&#39;, function($delegate, customService) {
            var original = $delegate[0];
            var link = original.link;

            // redéfinition de la fonction link de la directive angular ng-if
            original.compile = function() {
                return function($scope, $element, $attr, ctrl, $transclude) {

                    // check maison sur la base d&#39;un attribut ng-if-param
                    if($attr.ngIfParam) {
                        var paramValue = eval($attr.ngIfParam);
                        if (customService.fn(paramValue)) {
                            // on substitue la valeur de ng-if par false
                            $attr.ngIf = &quot;false&quot;;
                        }
                    }

                    // appliquer le comportement normal de ng-if
                    link.apply(this, arguments);
                };
            };

            return $delegate;
        }]);
    }

})(angular);</code></pre>
</article></body></html>